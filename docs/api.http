### Benicio Advogados API - HTTP Test File
### Base URL: http://localhost:3333
### This file contains examples for testing all API endpoints
###
### Authentication: Most endpoints require JWT Bearer token
### Include header: Authorization: Bearer <token>
###
### API Conventions:
### - Content-Type: application/json (except file uploads)
### - Timestamps: ISO 8601 format
### - Database fields: snake_case naming
### - Pagination: ?page=1&limit=20
### - Sorting: ?sortBy=field&order=asc|desc
### - Search: ?search=term

### Variables (replace with actual values after login)
@baseUrl = http://localhost:3333/api/v1
@contentType = application/json

### Update these after successful login
@accessToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
@refreshToken = refresh_token_here
@userId = 1
@roleId = 1
@clientId = 1
@folderId = 1
@conversationId = 1

################################################################################
# AUTHENTICATION
################################################################################

### Login - Get Access Token (Email)
# @name loginResponse
POST {{baseUrl}}/sessions/sign-in
Content-Type: {{contentType}}

{
  "uid": "employee@benicio.com.br",
  "password": "benicio123"
}

### Login with Username
POST {{baseUrl}}/sessions/sign-in
Content-Type: {{contentType}}

{
  "uid": "employee",
  "password": "benicio123"
}

### Login Admin
POST {{baseUrl}}/sessions/sign-in
Content-Type: {{contentType}}

{
  "uid": "admin@benicio.com.br",
  "password": "benicio123"
}

### Refresh Token
POST {{baseUrl}}/sessions/refresh
Content-Type: {{contentType}}

{
  "refresh_token": "{{refreshToken}}"
}

### Logout
POST {{baseUrl}}/sessions/sign-out
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

### Get Current User
GET {{baseUrl}}/sessions/me
Authorization: Bearer {{accessToken}}

### Register New User
POST {{baseUrl}}/sessions/sign-up
Content-Type: {{contentType}}

{
  "full_name": "João Silva",
  "email": "joao.silva@benicio.com.br",
  "username": "joaosilva",
  "password": "senha123",
  "password_confirmation": "senha123"
}

################################################################################
# FOLDERS (Cases/Processes)
################################################################################

### List All Folders (Paginated)
GET {{baseUrl}}/folders?page=1&per_page=20
Authorization: Bearer {{accessToken}}

### List Folders with Filters
GET {{baseUrl}}/folders?status=active&priority=high&page=1&per_page=10
Authorization: Bearer {{accessToken}}

### Search Folders
GET {{baseUrl}}/folders?search=Cobrança&page=1&per_page=20
Authorization: Bearer {{accessToken}}

### Filter by Client
GET {{baseUrl}}/folders?client_id=1&page=1&per_page=20
Authorization: Bearer {{accessToken}}

### Filter by Court
GET {{baseUrl}}/folders?court_id=1&page=1&per_page=20
Authorization: Bearer {{accessToken}}

### Filter by Folder Type
GET {{baseUrl}}/folders?folder_type_id=1&page=1&per_page=20
Authorization: Bearer {{accessToken}}

### Sort Folders
GET {{baseUrl}}/folders?sort_by=created_at&sort_order=desc&page=1&per_page=20
Authorization: Bearer {{accessToken}}

### Combined Filters
GET {{baseUrl}}/folders?status=active&client_id=1&folder_type_id=1&sort_by=case_value&sort_order=desc
Authorization: Bearer {{accessToken}}

### Get Folder Statistics
GET {{baseUrl}}/folders/stats
Authorization: Bearer {{accessToken}}

### Get Favorite Folders
GET {{baseUrl}}/folders/favorites?page=1&per_page=20
Authorization: Bearer {{accessToken}}

### Get Single Folder with Relationships
GET {{baseUrl}}/folders/{{folderId}}
Authorization: Bearer {{accessToken}}

### Create New Folder
POST {{baseUrl}}/folders
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "title": "Processo de Cobrança - Cliente XYZ",
  "description": "Ação de cobrança de valores devidos",
  "cnj_number": "0000001-23.2024.8.26.0100",
  "internal_client_code": "CLI-2024-001",
  "folder_type_id": 1,
  "client_id": 1,
  "court_id": 1,
  "responsible_lawyer_id": 2,
  "status": "active",
  "priority": "high",
  "case_value": 150000.00,
  "action_type": "Ação de Cobrança",
  "distribution_date": "2024-03-15",
  "distribution_type": "Sorteio"
}

### Update Folder
PUT {{baseUrl}}/folders/{{folderId}}
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "title": "Processo de Cobrança - Atualizado",
  "description": "Descrição atualizada do processo",
  "status": "pending",
  "priority": "medium",
  "case_value": 175000.00
}

### Toggle Favorite
PATCH {{baseUrl}}/folders/{{folderId}}/favorite
Authorization: Bearer {{accessToken}}

### Soft Delete Folder
DELETE {{baseUrl}}/folders/{{folderId}}
Authorization: Bearer {{accessToken}}

### Restore Deleted Folder
POST {{baseUrl}}/folders/{{folderId}}/restore
Authorization: Bearer {{accessToken}}

################################################################################
# CLIENTS
################################################################################

### List All Clients (Paginated)
GET {{baseUrl}}/clients?page=1&per_page=20
Authorization: Bearer {{accessToken}}

### Search Clients
GET {{baseUrl}}/clients?search=Benicio&page=1&per_page=10
Authorization: Bearer {{accessToken}}

### Filter Clients by Type
GET {{baseUrl}}/clients?person_type=company&client_type=client
Authorization: Bearer {{accessToken}}

### Sort Clients
GET {{baseUrl}}/clients?sort_by=fantasy_name&sort_order=asc&page=1&per_page=20
Authorization: Bearer {{accessToken}}

### Get Client Details
GET {{baseUrl}}/clients/{{clientId}}
Authorization: Bearer {{accessToken}}

### Create Company Client
POST {{baseUrl}}/clients
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "fantasy_name": "Tech Solutions Ltda",
  "company_name": "Tech Solutions Tecnologia Ltda",
  "document": "12.345.678/0001-90",
  "document_type": "cnpj",
  "person_type": "company",
  "client_type": "client",
  "email": "contato@techsolutions.com.br",
  "phone": "(11) 3456-7890",
  "mobile": "(11) 98765-4321",
  "website": "https://techsolutions.com.br",
  "revenue_range": "medium",
  "employee_count": 50,
  "notes": "Cliente desde 2024"
}

### Create Individual Client
POST {{baseUrl}}/clients
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "fantasy_name": "João Silva",
  "full_name": "João Carlos da Silva",
  "document": "123.456.789-00",
  "document_type": "cpf",
  "person_type": "individual",
  "client_type": "prospect",
  "email": "joao.silva@email.com",
  "phone": "(11) 3456-7890",
  "mobile": "(11) 98765-4321",
  "birth_date": "1985-05-15",
  "gender": "M",
  "marital_status": "married",
  "profession": "Empresário",
  "notes": "Prospect via indicação"
}

### Update Client
PUT {{baseUrl}}/clients/{{clientId}}
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "fantasy_name": "Tech Solutions Updated",
  "email": "novo@techsolutions.com.br",
  "client_type": "client",
  "notes": "Cliente VIP - Atualizado em 2024"
}

### Delete Client
DELETE {{baseUrl}}/clients/{{clientId}}
Authorization: Bearer {{accessToken}}

################################################################################
# USERS
################################################################################

### List All Users (Admin Only)
GET {{baseUrl}}/users?page=1&per_page=20
Authorization: Bearer {{accessToken}}

### Search Users
GET {{baseUrl}}/users?search=joão&page=1&per_page=10
Authorization: Bearer {{accessToken}}

### Filter by User Type
GET {{baseUrl}}/users?user_type=employee&is_active=true
Authorization: Bearer {{accessToken}}

### Sort Users
GET {{baseUrl}}/users?sort_by=created_at&sort_order=desc&page=1&per_page=20
Authorization: Bearer {{accessToken}}

### Get User Details
GET {{baseUrl}}/users/{{userId}}
Authorization: Bearer {{accessToken}}

### Create New User (Admin Only)
POST {{baseUrl}}/users
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "full_name": "Carlos Oliveira",
  "email": "carlos.oliveira@benicio.com.br",
  "username": "carlosoliveira",
  "password": "senha123",
  "user_type": "employee",
  "cpf": "987.654.321-00",
  "phone": "(11) 98765-4321",
  "birth_date": "1990-08-20",
  "hire_date": "2024-01-15",
  "department": "Jurídico",
  "position": "Advogado Júnior",
  "oab_number": "SP123456"
}

### Update User
PUT {{baseUrl}}/users/{{userId}}
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "full_name": "Carlos Oliveira Santos",
  "position": "Advogado Pleno",
  "department": "Jurídico - Cível",
  "phone": "(11) 91234-5678"
}

### Delete User (Soft Delete)
DELETE {{baseUrl}}/users/{{userId}}
Authorization: Bearer {{accessToken}}

### Get Current User Profile
GET {{baseUrl}}/me
Authorization: Bearer {{accessToken}}

### Get Current User Permissions
GET {{baseUrl}}/me/permissions
Authorization: Bearer {{accessToken}}

### Get Current User Roles
GET {{baseUrl}}/me/roles
Authorization: Bearer {{accessToken}}

################################################################################
# ROLES & PERMISSIONS
################################################################################

### List All Roles
GET {{baseUrl}}/admin/roles?page=1&per_page=10
Authorization: Bearer {{accessToken}}

### Get Role Details
GET {{baseUrl}}/admin/roles/{{roleId}}
Authorization: Bearer {{accessToken}}

### Attach Roles to User
PUT {{baseUrl}}/admin/roles/attach
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "user_id": {{userId}},
  "role_ids": [1, 2]
}

### List All Permissions
GET {{baseUrl}}/admin/permissions?page=1&per_page=10
Authorization: Bearer {{accessToken}}

### Create Permission
POST {{baseUrl}}/admin/permissions
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "resource": "folders",
  "action": "approve",
  "description": "Allow approving folders"
}

### Sync Role Permissions
PUT {{baseUrl}}/admin/roles/permissions/sync
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "role_id": {{roleId}},
  "permission_ids": [1, 2, 3, 4, 5]
}

### Attach Permissions to Role
PUT {{baseUrl}}/admin/roles/permissions/attach
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "role_id": {{roleId}},
  "permission_ids": [6, 7]
}

### Detach Permissions from Role
PUT {{baseUrl}}/admin/roles/permissions/detach
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "role_id": {{roleId}},
  "permission_ids": [1]
}

### Sync User Direct Permissions
PUT {{baseUrl}}/admin/users/permissions/sync
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "user_id": {{userId}},
  "permission_ids": [10, 11, 12]
}

### Get User's Direct Permissions
GET {{baseUrl}}/admin/users/{{userId}}/permissions
Authorization: Bearer {{accessToken}}

### Check User Permissions
POST {{baseUrl}}/admin/users/{{userId}}/permissions/check
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "permissions": ["folders.create", "folders.delete"],
  "require_all": false
}

################################################################################
# FILE UPLOADS
################################################################################

### Upload File
POST {{baseUrl}}/files/upload
Authorization: Bearer {{accessToken}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="file"; filename="document.pdf"
Content-Type: application/pdf

< ./document.pdf
------WebKitFormBoundary--

################################################################################
# HEALTH & SYSTEM
################################################################################

### Health Check
GET {{baseUrl}}/health

### API Version
GET http://localhost:3333/

################################################################################
# AI AGENTS & CHAT
################################################################################

### List Available AI Agents
GET {{baseUrl}}/ai/agents
Authorization: Bearer {{accessToken}}

### Send Simple Message to AI (Single Agent Mode)
# @name chatSimple
POST {{baseUrl}}/ai/chat
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "message": "Qual o prazo para recurso de apelação cível?",
  "mode": "single"
}

### Send Message with Process Context
POST {{baseUrl}}/ai/chat
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "message": "Analise a viabilidade de recurso neste caso",
  "folder_id": {{folderId}},
  "mode": "single"
}

### Continue Existing Conversation
POST {{baseUrl}}/ai/chat
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "message": "E quais são os riscos dessa estratégia?",
  "conversation_id": {{conversationId}},
  "folder_id": {{folderId}},
  "mode": "single"
}

### Multi-Agent Collaboration Mode
POST {{baseUrl}}/ai/chat
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "message": "Preciso de uma análise completa deste processo com estratégia jurídica",
  "folder_id": {{folderId}},
  "mode": "multi"
}

### Streaming Chat with SSE (Server-Sent Events)
POST {{baseUrl}}/ai/chat/stream
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "message": "Explique detalhadamente os fundamentos jurídicos da prescrição intercorrente",
  "mode": "single"
}

### Streaming with Conversation Context
POST {{baseUrl}}/ai/chat/stream
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "message": "Continue explicando com exemplos práticos",
  "conversation_id": {{conversationId}},
  "mode": "single"
}

################################################################################
# AI WORKFLOWS
################################################################################

### Execute Full Case Analysis Workflow
POST {{baseUrl}}/ai/workflows
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "workflow": "full-case-analysis",
  "folder_id": {{folderId}},
  "message": "Analise completa do processo para apresentação ao cliente"
}

### Execute Contract Review Workflow
POST {{baseUrl}}/ai/workflows
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "workflow": "contract-review",
  "folder_id": {{folderId}},
  "message": "Revisar contrato e identificar cláusulas problemáticas"
}

### Execute Litigation Strategy Workflow
POST {{baseUrl}}/ai/workflows
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "workflow": "litigation-strategy",
  "folder_id": {{folderId}},
  "message": "Desenvolver estratégia processual completa"
}

################################################################################
# AI CONVERSATIONS
################################################################################

### List User Conversations (Paginated)
GET {{baseUrl}}/ai/conversations?page=1&per_page=20
Authorization: Bearer {{accessToken}}

### List Conversations by Folder
GET {{baseUrl}}/ai/conversations?folder_id={{folderId}}&page=1&per_page=10
Authorization: Bearer {{accessToken}}

### Sort Conversations by Date
GET {{baseUrl}}/ai/conversations?sort_by=updated_at&sort_order=desc&page=1&per_page=20
Authorization: Bearer {{accessToken}}

### Get Conversation Details with Messages
GET {{baseUrl}}/ai/conversations/{{conversationId}}
Authorization: Bearer {{accessToken}}

### Delete Conversation
DELETE {{baseUrl}}/ai/conversations/{{conversationId}}
Authorization: Bearer {{accessToken}}

################################################################################
# DASHBOARD & STATISTICS
################################################################################

### Get Active Folders Statistics
# Returns current active folders count with historical comparison
GET http://localhost:3333/api/dashboard/active-folders
Authorization: Bearer {{accessToken}}

### Get Favorite Folders (Dashboard Widget)
GET http://localhost:3333/api/dashboard/favorite-folders
Authorization: Bearer {{accessToken}}

### Add Folder to Favorites
POST http://localhost:3333/api/dashboard/favorite-folders/{{folderId}}
Authorization: Bearer {{accessToken}}

### Remove Folder from Favorites
DELETE http://localhost:3333/api/dashboard/favorite-folders/{{folderId}}
Authorization: Bearer {{accessToken}}

### Get Area Division Statistics
# Returns folder distribution across legal areas
GET http://localhost:3333/api/area-division
Authorization: Bearer {{accessToken}}

### Get Folder Activity
# Returns folder activity statistics over time
GET http://localhost:3333/api/folder-activity
Authorization: Bearer {{accessToken}}

### Get Tasks List (Paginated)
GET http://localhost:3333/api/tasks?page=1&per_page=10
Authorization: Bearer {{accessToken}}

### Get Tasks with Filters
GET http://localhost:3333/api/tasks?status=pending&priority=high&page=1&per_page=10
Authorization: Bearer {{accessToken}}

### Get Overdue Tasks
GET http://localhost:3333/api/tasks?overdue=true&sort_by=due_date&direction=asc
Authorization: Bearer {{accessToken}}

### Get Upcoming Tasks (Next 7 Days)
GET http://localhost:3333/api/tasks?upcoming=true&page=1&per_page=20
Authorization: Bearer {{accessToken}}

### Get Tasks by Assignee
GET http://localhost:3333/api/tasks?assigned_to_id={{userId}}&page=1&per_page=10
Authorization: Bearer {{accessToken}}

### Get Tasks by Folder
GET http://localhost:3333/api/tasks?folder_id={{folderId}}&page=1&per_page=10
Authorization: Bearer {{accessToken}}

### Search Tasks
GET http://localhost:3333/api/tasks?search=audiência&page=1&per_page=10
Authorization: Bearer {{accessToken}}

### Get Requests Statistics
# Returns statistics about client requests
GET http://localhost:3333/api/requests
Authorization: Bearer {{accessToken}}

### Get Hearings and Deadlines
# Returns upcoming hearings and important deadlines
GET http://localhost:3333/api/hearings
Authorization: Bearer {{accessToken}}

### Get Birthdays for Current Month
# Returns client and employee birthdays
GET http://localhost:3333/api/birthdays
Authorization: Bearer {{accessToken}}

################################################################################
# CNJ VALIDATION
################################################################################

### Validate CNJ Number
POST {{baseUrl}}/folders/validate-cnj
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "cnj_number": "0000085-78.2023.8.06.0001"
}

### Validate Invalid CNJ
POST {{baseUrl}}/folders/validate-cnj
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "cnj_number": "1234567-89.2024.8.26.0100"
}

################################################################################
# EMAIL VERIFICATION
################################################################################

### Verify Email with Token
GET {{baseUrl}}/verify-email?token=verification_token_here
Authorization: Bearer {{accessToken}}

################################################################################
# ADVANCED QUERIES
################################################################################

### Complex Folder Query
GET {{baseUrl}}/folders?status=active&priority=high&client_id=1&folder_type_id=2&court_id=3&sort_by=case_value&sort_order=desc&page=1&per_page=10
Authorization: Bearer {{accessToken}}

### Full-Text Search across Multiple Fields
GET {{baseUrl}}/folders?search=cobrança trabalhista&page=1&per_page=20
Authorization: Bearer {{accessToken}}

### Date Range Filter (Distribution Date)
GET {{baseUrl}}/folders?date_from=2024-01-01&date_to=2024-12-31&page=1&per_page=20
Authorization: Bearer {{accessToken}}

### Combined Dashboard Statistics
# Fetch all dashboard data in parallel (use multiple requests)
# 1. Active folders
# 2. Area division
# 3. Folder activity
# 4. Tasks
# 5. Requests
# 6. Hearings
# 7. Birthdays
# 8. Favorite folders
